import{r as i,j as e,u as A,b as j,a as $}from"./index-B-DAgIDG.js";import{i as S,g as B,S as F}from"./ScrollTrigger-BaGcfRfm.js";import{m as s,A as H}from"./index-DNBFdzca.js";const O=()=>{const[g,y]=i.useState([]),[x,h]=i.useState({title:"",description:"",assignedTo:""}),[u,a]=i.useState(""),[c,l]=i.useState("");i.useEffect(()=>{(async()=>{try{const n=await S.get("/admin/employees");y(n.data),console.log(n.data)}catch(n){console.error("Failed to fetch employees:",n),a("Unauthorized or failed to load employees")}})()},[]);const w=d=>{h({...x,[d.target.name]:d.target.value})},v=async d=>{var n,m,b;d.preventDefault();try{const f=await S.post("/admin/task",x);console.log("Task created:",f.data),l("Task assigned successfully!"),h({title:"",description:"",assignedTo:""}),a("")}catch(f){console.error("Error assigning task:",((n=f.response)==null?void 0:n.data)||f.message),a(((b=(m=f.response)==null?void 0:m.data)==null?void 0:b.message)||"Failed to assign task"),l("")}};return e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[u&&e.jsx(s.div,{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg text-sm",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:u}),c&&e.jsx(s.div,{className:"mb-4 p-3 bg-green-100 text-green-700 rounded-lg text-sm",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:c}),e.jsxs("form",{onSubmit:v,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Task Title"}),e.jsx(s.div,{whileHover:{scale:1.01},children:e.jsx("input",{type:"text",name:"title",value:x.title,onChange:w,required:!0,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-200 focus:border-blue-500 transition-all text-black",placeholder:"Enter task title"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx(s.div,{whileHover:{scale:1.01},children:e.jsx("textarea",{name:"description",value:x.description,onChange:w,required:!0,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-200 focus:border-blue-500 transition-all min-h-[120px] text-black",placeholder:"Describe the task details..."})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assign To"}),e.jsx(s.div,{whileHover:{scale:1.01},children:e.jsxs("select",{name:"assignedTo",value:x.assignedTo,onChange:w,required:!0,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-200 focus:border-blue-500 transition-all appearance-none bg-white text-black",children:[e.jsx("option",{value:"",children:"Select an employee"}),g.map(d=>e.jsxs("option",{value:d._id,className:"text-black",children:[d.name," (",d.department||"No dept",")"]},d._id))]})})]}),e.jsxs(s.button,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-medium py-3 rounded-lg shadow hover:shadow-md transition-all flex items-center justify-center gap-2",whileHover:{scale:1.01},whileTap:{scale:.99},children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[e.jsx("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),e.jsx("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z",clipRule:"evenodd"})]}),"Assign Task"]})]})]})};function W({updatedUser:g,onProfileUpdate:y}){const{user:x}=A(),[h,u]=i.useState([]),[a,c]=i.useState(null),[l,w]=i.useState(null),[v,d]=i.useState(!1),[n,m]=i.useState([]),[b,f]=i.useState(new Date),[T,M]=i.useState(!1),N=["Full Stack","Frontend","Backend","Designer","DSA"],L=async()=>{M(!0);try{const t=await j.get(`http://localhost:5000/api/admin/employees?cache=${Date.now()}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});u(t.data)}catch(t){console.error("Failed to fetch employees:",t)}finally{M(!1)}};i.useEffect(()=>{L();const t=setInterval(L,3e4);return()=>clearInterval(t)},[b,g]),i.useEffect(()=>{if(a){const t=h.find(o=>o._id===a._id);t&&w(t)}},[h,a]);const z=()=>{f(new Date)},k=t=>{if(!t)return"Never";const o=new Date,p=new Date(t),r=Math.floor((o-p)/(1e3*60));return r<1?"Just now":r<60?`${r} min ago`:r<1440?`${Math.floor(r/60)} hours ago`:`${Math.floor(r/1440)} days ago`},E=async t=>{if(window.confirm("Are you sure you want to remove this user?"))try{await j.delete(`http://localhost:5000/api/admin/remove-user/${t}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),u(o=>o.filter(p=>p._id!==t)),(a==null?void 0:a._id)===t&&c(null)}catch(o){console.error("Error deleting user:",o)}},C=async t=>{try{const o=await j.get(`/api/admin/employee/${t}/attendance`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});m(o.data),d(!0)}catch(o){console.error("Error fetching attendance:",o)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(s.h3,{className:"text-lg font-semibold text-gray-700",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1},children:"Employee Directory"}),e.jsxs("div",{className:"flex items-center gap-3",children:[T&&e.jsxs(s.div,{className:"flex items-center text-sm text-gray-500",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Updating..."]}),e.jsxs(s.button,{onClick:z,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-50 to-indigo-50 text-blue-600 rounded-xl shadow-sm hover:shadow-md transition-all",whileHover:{scale:1.05},whileTap:{scale:.95},initial:{opacity:0,x:10},animate:{opacity:1,x:0},transition:{delay:.2},children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})}),"Refresh"]})]})]}),e.jsxs("div",{className:"space-y-8",children:[N.map((t,o)=>{const p=h.filter(r=>r.department===t);return p.length===0?null:e.jsxs(s.div,{className:"space-y-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1+o*.05},children:[e.jsxs(s.h4,{className:"text-lg font-semibold text-gray-700 border-b pb-2 flex items-center gap-2",whileHover:{x:5},children:[e.jsx("span",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 w-2 h-6 rounded-full"}),t," Team"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map((r,D)=>e.jsxs(s.div,{className:"bg-white p-5 rounded-2xl shadow-sm border border-gray-100 hover:shadow-md transition-all relative overflow-hidden group",whileHover:{y:-5,boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1)"},initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.1+o*.05+D*.03,type:"spring",stiffness:300,damping:15},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50 to-indigo-50 opacity-0 group-hover:opacity-100 transition-opacity duration-300 -z-10"}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs(s.div,{className:"relative",whileHover:{rotate:5},children:[e.jsx("img",{src:r.profile||`https://ui-avatars.com/api/?name=${r.name}&background=random`,alt:`${r.name}'s profile`,className:"w-14 h-14 rounded-full object-cover border-2 border-white shadow-lg"}),e.jsx("div",{className:`absolute -bottom-1 -right-1 w-4 h-4 rounded-full border-2 border-white ${r.isOnline?"bg-green-400 animate-pulse":"bg-gray-400"}`})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:r.name}),e.jsx("p",{className:"text-sm text-gray-600",children:r.email}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:r.department||"No department"}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx("span",{className:`inline-block w-2 h-2 rounded-full mr-1 ${r.isOnline?"bg-green-400 animate-pulse":"bg-gray-400"}`}),e.jsx("span",{className:"text-xs text-gray-500",children:r.isOnline?"Online now":`Offline (${k(r.lastActive)})`})]})]})]}),e.jsxs(s.div,{className:"mt-4 flex gap-2",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:[e.jsxs(s.button,{className:"px-3 py-1.5 bg-blue-50 hover:bg-blue-100 text-blue-600 rounded-lg text-sm flex-1 transition-colors flex items-center justify-center gap-1",onClick:()=>c(r),whileHover:{scale:1.03,backgroundColor:"#EFF6FF"},whileTap:{scale:.97},children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View"]}),e.jsxs(s.button,{className:"px-3 py-1.5 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg text-sm flex-1 transition-colors flex items-center justify-center gap-1",onClick:()=>E(r._id),whileHover:{scale:1.03,backgroundColor:"#FEE2E2"},whileTap:{scale:.97},children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Remove"]}),e.jsxs(s.button,{className:"px-3 py-1.5 bg-purple-50 hover:bg-purple-100 text-purple-600 rounded-lg text-sm flex-1 transition-colors flex items-center justify-center gap-1",onClick:()=>C(r._id),whileHover:{scale:1.03,backgroundColor:"#F3E8FF"},whileTap:{scale:.97},children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Attendance"]})]})]},r._id))})]},t)}),h.filter(t=>!N.includes(t.department)).length>0&&e.jsxs(s.div,{className:"space-y-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[e.jsxs(s.h4,{className:"text-lg font-semibold text-gray-700 border-b pb-2 flex items-center gap-2",whileHover:{x:5},children:[e.jsx("span",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 w-2 h-6 rounded-full"}),"Other Employees"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.filter(t=>!N.includes(t.department)).map((t,o)=>e.jsxs(s.div,{className:"bg-white p-5 rounded-2xl shadow-sm border border-gray-100 hover:shadow-md transition-all relative overflow-hidden group",whileHover:{y:-5,boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1)"},initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.3+o*.03,type:"spring",stiffness:300,damping:15},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-50 to-purple-50 opacity-0 group-hover:opacity-100 transition-opacity duration-300 -z-10"}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs(s.div,{className:"relative",whileHover:{rotate:5},children:[e.jsx("img",{src:t.profile||`https://ui-avatars.com/api/?name=${t.name}&background=random`,alt:`${t.name}'s profile`,className:"w-14 h-14 rounded-full object-cover border-2 border-white shadow-lg"}),e.jsx("div",{className:`absolute -bottom-1 -right-1 w-4 h-4 rounded-full border-2 border-white ${t.isOnline?"bg-green-400 animate-pulse":"bg-gray-400"}`})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:t.name}),e.jsx("p",{className:"text-sm text-gray-600",children:t.email}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:t.department||"No department"}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx("span",{className:`inline-block w-2 h-2 rounded-full mr-1 ${t.isOnline?"bg-green-400 animate-pulse":"bg-gray-400"}`}),e.jsx("span",{className:"text-xs text-gray-500",children:t.isOnline?"Online now":`Offline (${k(t.lastActive)})`})]})]})]}),e.jsxs(s.div,{className:"mt-4 flex gap-2",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:[e.jsxs(s.button,{className:"px-3 py-1.5 bg-blue-50 hover:bg-blue-100 text-blue-600 rounded-lg text-sm flex-1 transition-colors flex items-center justify-center gap-1",onClick:()=>c(t),whileHover:{scale:1.03,backgroundColor:"#EFF6FF"},whileTap:{scale:.97},children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View"]}),e.jsxs(s.button,{className:"px-3 py-1.5 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg text-sm flex-1 transition-colors flex items-center justify-center gap-1",onClick:()=>E(t._id),whileHover:{scale:1.03,backgroundColor:"#FEE2E2"},whileTap:{scale:.97},children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Remove"]}),e.jsxs(s.button,{className:"px-3 py-1.5 bg-purple-50 hover:bg-purple-100 text-purple-600 rounded-lg text-sm flex-1 transition-colors flex items-center justify-center gap-1",onClick:()=>C(t._id),whileHover:{scale:1.03,backgroundColor:"#F3E8FF"},whileTap:{scale:.97},children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Attendance"]})]})]},t._id))})]})]}),e.jsx(H,{children:a&&e.jsx(s.div,{className:"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:e.jsxs(s.div,{className:"bg-gradient-to-br from-white to-gray-50 rounded-2xl shadow-2xl w-full max-w-md overflow-hidden border border-gray-200 relative",initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",stiffness:300,damping:25,duration:.3},children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-blue-600 p-6 text-white relative",children:[e.jsx(s.button,{className:"absolute top-4 right-4 text-white/80 hover:text-white transition-colors p-1",onClick:()=>c(null),whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs(s.div,{className:"flex flex-col items-center",children:[e.jsxs(s.div,{className:"relative",whileHover:{scale:1.05},children:[e.jsx("img",{src:(l||a).profile||`https://ui-avatars.com/api/?name=${(l||a).name}&background=random`,alt:`${(l||a).name}'s profile`,className:"w-24 h-24 rounded-full object-cover border-4 border-white/80 shadow-lg mb-4"}),e.jsx("div",{className:`absolute bottom-2 right-2 w-5 h-5 rounded-full border-2 border-white ${(l||a).isOnline?"bg-green-400 animate-pulse":"bg-gray-400"}`})]}),e.jsx(s.h3,{className:"text-2xl font-bold",children:(l||a).name}),e.jsx(s.p,{className:"text-blue-100 mt-1",children:(l||a).role})]})]}),e.jsxs(s.div,{className:"p-6 space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(s.div,{className:"bg-blue-50/50 p-4 rounded-xl border border-blue-100 hover:shadow-sm transition-shadow",whileHover:{y:-2},children:[e.jsx("p",{className:"text-sm font-medium text-blue-600 mb-1",children:"Email"}),e.jsx("p",{className:"text-gray-800",children:(l||a).email})]}),e.jsxs(s.div,{className:"bg-indigo-50/50 p-4 rounded-xl border border-indigo-100 hover:shadow-sm transition-shadow",whileHover:{y:-2},children:[e.jsx("p",{className:"text-sm font-medium text-indigo-600 mb-1",children:"Department"}),e.jsx("p",{className:"text-gray-800",children:(l||a).department||"Not specified"})]})]}),e.jsxs(s.div,{className:"mt-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Employee Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between border-b border-gray-100 pb-2",children:[e.jsx("span",{className:"text-gray-600",children:"Status"}),e.jsxs("span",{className:"flex items-center",children:[e.jsx("span",{className:`w-2 h-2 rounded-full mr-2 ${(l||a).isOnline?"bg-green-400 animate-pulse":"bg-gray-400"}`}),e.jsx("span",{className:"text-gray-800",children:(l||a).isOnline?"Online":"Offline"})]})]}),e.jsxs("div",{className:"flex justify-between border-b border-gray-100 pb-2",children:[e.jsx("span",{className:"text-gray-600",children:"Last Active"}),e.jsx("span",{className:"text-gray-800",children:(l||a).isOnline?"Now":(l||a).lastActive?k((l||a).lastActive):"Never"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Member Since"}),e.jsx("span",{className:"text-gray-800",children:new Date((l||a).createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short"})})]})]})]}),e.jsxs(s.div,{className:"flex gap-3 mt-6",children:[e.jsxs(s.button,{className:"flex-1 px-4 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white rounded-lg transition-all flex items-center justify-center gap-2",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{c(null),C((l||a)._id)},children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),"View Attendance"]}),e.jsx(s.button,{className:"flex-1 px-4 py-2.5 bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-lg transition-colors",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>c(null),children:"Close"})]})]})]})})}),e.jsx(H,{children:v&&e.jsx(s.div,{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsxs(s.div,{className:"bg-white rounded-xl shadow-2xl w-full max-w-md max-h-[80vh] overflow-hidden flex flex-col",initial:{scale:.95,y:20},animate:{scale:1,y:0},exit:{scale:.95,y:20},transition:{type:"spring",stiffness:300,damping:25},children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-5 text-white",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Attendance Records"}),e.jsx("p",{className:"text-sm text-blue-100",children:"Last 30 days"})]}),e.jsx("div",{className:"p-6 overflow-y-auto flex-1",children:n.length>0?e.jsx("div",{className:"space-y-3",children:n.map(t=>{const o=new Date(t.date),p=o.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),r=o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return e.jsxs(s.div,{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg hover:shadow-sm transition-all",whileHover:{x:2},children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-800 block",children:p}),e.jsx("span",{className:"text-gray-500 text-sm",children:r})]}),e.jsxs("span",{className:"flex items-center text-green-600",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Present"]})]},t._id)})}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 mx-auto text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),e.jsx("p",{className:"mt-2",children:"No attendance records found"})]})}),e.jsx("div",{className:"p-4 border-t border-gray-100 flex justify-end",children:e.jsx(s.button,{className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-lg transition-colors",onClick:()=>d(!1),whileHover:{scale:1.03},whileTap:{scale:.97},children:"Close"})})]})})})]})}B.registerPlugin(F);function U(){const{user:g,clearUser:y}=A(),x=$(),[h,u]=i.useState(!1),[a,c]=i.useState([]),[l,w]=i.useState(null);i.useRef(),i.useRef(),i.useRef([]);const v=n=>{w(n)};i.useEffect(()=>{(!g||g.role!=="admin")&&x("/login"),console.log(l)},[g]),i.useEffect(()=>{(async()=>{try{const m=await j.get("http://localhost:5000/api/admin/completed-tasks",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});c(m.data.tasks||[])}catch(m){console.error("Error fetching completed tasks:",m),c([])}})()},[g]);const d=()=>{y(),x("/login")};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsxs(s.div,{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-800",children:e.jsx("span",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"Admin Dashboard"})}),e.jsx("p",{className:"text-gray-600",children:"Manage your team and tasks efficiently"})]}),e.jsxs(s.button,{onClick:d,className:"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl shadow-lg hover:shadow-xl transition-all",whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z",clipRule:"evenodd"})}),"Logout"]})]}),e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-100",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-5 text-white",children:e.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Assign New Task"]})}),e.jsx("div",{className:"p-6",children:e.jsx(O,{})})]}),e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-100",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-5 text-white",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),"Employee Management"]}),e.jsx(s.button,{onClick:()=>u(n=>!n),className:"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg backdrop-blur-sm flex items-center gap-2 transition-all",whileHover:{scale:1.05},whileTap:{scale:.95},children:h?"Hide Employees":"View Employees"})]})}),e.jsx(H,{children:h&&e.jsx(s.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"p-6",children:e.jsx(W,{updatedUser:l,onProfileUpdate:v})})})]}),e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-100",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-5 text-white",children:e.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Completed Tasks"]})}),e.jsx("div",{className:"p-6",children:a.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 mx-auto text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),e.jsx("p",{className:"mt-2",children:"No completed tasks yet"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.map(n=>{var m;return e.jsxs(s.div,{className:"bg-gradient-to-r from-green-50 to-blue-50 p-4 rounded-xl border border-green-100 shadow-sm hover:shadow-md transition-shadow",whileHover:{y:-3},initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[e.jsx("h3",{className:"font-medium text-gray-800",children:n.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:n.description}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsx("span",{className:"text-xs px-2 py-1 bg-green-100 text-green-800 rounded-full",children:"Completed"}),e.jsxs("span",{className:"text-xs text-gray-500",children:["by ",((m=n.assignedTo)==null?void 0:m.name)||"Unknown"]})]})]},n._id)})})})]})]})})}export{U as default};
