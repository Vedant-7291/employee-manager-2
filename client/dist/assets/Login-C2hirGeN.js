import{u as j,r,a as w,j as e,L as N,b as S}from"./index-B-DAgIDG.js";import{A as p,m as t}from"./index-DNBFdzca.js";const I=()=>{const{setUser:c}=j(),[o,y]=r.useState(""),[n,b]=r.useState(""),[s,d]=r.useState(!1),[m,u]=r.useState(""),f=w(),v=async i=>{var g,x;i.preventDefault(),u(""),d(!0);try{const a=await S.post("http://localhost:5000/api/auth/login",{email:o,password:n});if(!a.data.success||!a.data.token||!a.data.user)throw new Error("Invalid response from server");const{token:h,user:l}=a.data;localStorage.setItem("token",h),localStorage.setItem("authUser",JSON.stringify(l)),c({user:l,token:h}),f(l.role==="admin"?"/admin/dashboard":"/employee/dashboard")}catch(a){console.error("Login error:",a),u(((x=(g=a.response)==null?void 0:g.data)==null?void 0:x.message)||a.message||"Login failed. Please try again."),localStorage.removeItem("token"),localStorage.removeItem("authUser"),c(null)}finally{d(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 flex items-center justify-center p-4",children:e.jsx(p,{children:e.jsx(t.div,{className:"relative w-full max-w-md",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},children:e.jsxs(t.div,{className:"bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-100",whileHover:{scale:1.01},transition:{type:"spring",stiffness:400,damping:10},children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 p-8 text-white text-center relative overflow-hidden",children:[e.jsx(t.h2,{className:"text-3xl font-bold relative z-10",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:"Fixxy"}),e.jsx(t.p,{className:"text-blue-100 mt-2 relative z-10",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:"Welcome back! Sign in to your account"})]}),e.jsxs("form",{onSubmit:v,className:"p-8 space-y-6",children:[e.jsx(p,{children:m&&e.jsx(t.div,{className:"bg-red-100 text-red-600 p-3 rounded-lg text-sm border border-red-200",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:m})}),e.jsxs(t.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.4},children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"email",value:o,onChange:i=>y(i.target.value),className:"w-full bg-gray-50 text-gray-800 px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0}),e.jsx(t.div,{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-500",initial:{scaleX:0},animate:{scaleX:o?1:0},transition:{duration:.3}})]})]}),e.jsxs(t.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.5},children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"password",value:n,onChange:i=>b(i.target.value),className:"w-full bg-gray-50 text-gray-800 px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0}),e.jsx(t.div,{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-500",initial:{scaleX:0},animate:{scaleX:n?1:0},transition:{duration:.3}})]})]}),e.jsxs(t.button,{type:"submit",className:"w-full bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-400 hover:to-indigo-500 text-white py-3 rounded-lg font-medium transition-all duration-300 disabled:opacity-50 relative overflow-hidden group",disabled:s,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.6},whileTap:{scale:.98},children:[e.jsx("span",{className:"relative z-10 flex items-center justify-center gap-2",children:s?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):"Sign In"}),e.jsx(t.span,{className:"absolute inset-0 bg-gradient-to-r from-blue-600 to-indigo-700 opacity-0 group-hover:opacity-100 transition-opacity duration-300",initial:{x:"-100%"},animate:{x:s?"100%":"0%"},transition:{duration:s?1.5:0}})]}),e.jsx(t.div,{className:"text-center pt-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.7},children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx(N,{to:"/register",className:"text-blue-600 font-medium hover:underline hover:text-blue-700 transition-colors",children:"Register here"})]})})]})]})})})})};export{I as default};
